<% include ../../layout/header %>

<div class="page-header">
    <h1><%=api.title %> API</h1>
</div>

<div class="well"><%-format(api.description) %></div>

<%-messages() %>

<div class="row-fluid">
    <div class="span6">
        <h2>Columns</h2>
        <% if (api.columns.length > 0) { %>
        <ol>
            <% api.columns.forEach(function(column) { %>
            <li><%=column %></li>
            <% }); %>
        </ol>
        <% } else { %>
        <div class="alert alert-error">No columns</div>
        <% } %>
    </div>
    <div class="span6">
        <h2>Data</h2>
        <p>Last updated: <%= (api.lastDataUpdate.getTime() === (new Date(0)).getTime() ? 'never' : api.lastDataUpdate) %></p>
        <p>Number of records: <%=api.num_records %></p>
        <p><a href="?populateData" class="btn btn-small btn-primary">Populate with latest data</a></p>
    </div>
</div>

<h2>Charts</h2>
<p><a class="btn btn-primary" href="<%=req.url%>/charts">Configure charts</a></p>

<h2>Configure your API</h2>
<div class="alert alert-info">
    Include swagger API thing here!
</div>

<% include ../../layout/footer %>